#!/usr/bin/env perl

# Pragmas.
use strict;
use warnings;

# Modules.
use App::Pod::Example;
use Getopt::Std;

# Arguments.
my $opts_hr = {
	'd' => 1,
	'h' => 0,
	'n' => undef,
	'p' => 0,
	'r' => 0,
	's' => 'EXAMPLE',
};
if (! getopts('d:hn:prs:', $opts_hr) || @ARGV < 1 || $opts_hr->{'h'} 
	|| (! $opts_hr->{'p'} && ! $opts_hr->{'r'})) {

	print STDERR "Usage: $0 [-d flag] [-h] [-n number] [-p] [-r] ".
		"[-s section] pod_file_or_module\n";
	print STDERR "\t-d flag\t\tTurn debug (0/1) (default is 1).\n";
	print STDERR "\t-h\t\tHelp.\n";
	print STDERR "\t-n number\t\tNumber of example (default is ".
		"nothing).\n";
	print STDERR "\t-p\t\tPrint example.\n";
	print STDERR "\t-r\t\tRun example.\n";
	print STDERR "\t-s section\tUse section (default EXAMPLE).\n";
	exit 1;
}
my $pod_file = $ARGV[0];

# Run.
App::Pod::Example->new(
	'debug' => $opts_hr->{'d'},
	'print' => $opts_hr->{'p'},
	'run' => $opts_hr->{'r'},
)->run($pod_file, $opts_hr->{'s'}, $opts_hr->{'n'});
